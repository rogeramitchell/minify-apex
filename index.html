<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-113826180-1"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			gtag('config', 'UA-113826180-1');
		</script>

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<!-- Bootstrap -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

		<!-- Page Specific Styles -->
		<style>
			html {
				position: relative;
				min-height: 100%;
			}
			body {
				margin-bottom: 60px;
			}
			main.container {
				padding: 60px 15px 0;
			}
			main.container > p.text-center.disclaimer {
				display: none;
			}
			div.column-of-buttons {
				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
			}
			div.column-of-buttons > button {
				width: 100%;
				margin: 0.5rem 0;
			}
			footer.footer {
				position: absolute;
				bottom: 0;
				width: 100%;
				height: 60px;
				line-height: 60px;
				background-color: #f5f5f5;
			}
			div.footer > div.container {
				padding-right: 15px;
				padding-left: 15px;
			}
		</style>
	</head>
	<body>
		<header>
			<nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
				<div class="navbar-brand mr-auto">Minify Apex!</div>
				<button class="btn btn-outline-warning my-2" onclick="reportIssue()">Report Issue</button>
			</nav>
		</header>
		<main role="main" class="container">
			<h1 class="mt-5 text-center">Let's make Apex test coverage easier.</h1>
			<p class="text-center">Front end developers can minify their code into a single line. <br/> Apex developers need to write test coverage on a per-line basis.</p>
			<p class="lead text-center">So why not write coverage for just 1 line of code?</p>
			<p class="text-center disclaimer">
				Ok, so you've clicked <strong>Minify</strong>, which means we need to have a serious conversation. Minifying Apex isn't a great idea. If you intend to use this in production, it's quite likely that you will end up with a headache when you try to change your code (if you forget there's a <strong>Prettify</strong> button on this site).
			</p>
			<p class="text-center disclaimer">
				There's a better way to approach Apex test coverage. You can <em>write your tests first</em>, which is truly Test Driven Development (TDD, <a href="https://developer.salesforce.com/page/Test_Driven_Development_with_Force.com?elq_mid=6689&amp;elq_cid=3660728" onclick="sendEventToGA('Referral: TDD')">learn more here</a>), or write your tests in a meaningful way. If you've never written tests before, check out <a href="https://trailhead.salesforce.com/en/modules/apex_testing" onclick="sendEventToGA('Referral: Trailhead')">Trailhead</a> to get up to speed.
			</p>
			<div class="action-container">
				<div class="row">
					<div class="col-md">
						<label for="pretty">Pretty Apex</label>
						<textarea name="pretty" id="pretty" class="form-control" cols="30" rows="20" placeholder="Your many lines of code..."></textarea>
					</div>
					<div class="col-xs column-of-buttons">
						<button type="button" class="btn btn-primary" onclick="minify()">Minify →</button>
						<button type="button" class="btn btn-primary" onclick="prettify()">← Prettify</button>
					</div>
					<div class="col-md">
						<label for="minified">Minified Apex</label>
						<textarea name="minified" id="minified" class="form-control" cols="30" rows="20" placeholder="Your one line of code..."></textarea>
					</div>
				</div>
			</div>
		</main>
		<footer class="footer">
			<div class="container">
				<p class="text-muted text-center">© 2018 Dodge Labs • Check out <a href="https://www.dodgelabs.com" onclick="sendEventToGA('Referral: Dodge Labs')">DodgeLabs.com</a> for developing apps without needing to minify your test coverage.</p>
			</div>
		</footer>
		<!-- JavaScript Functions -->
		<script type="text/javascript">
			function minify() {
				let prettyCode = document.getElementById('pretty').value;
				let minifiedCode = prettyCode.replace(/[\n\r]/g, '/* ¯\\_(ツ)_/¯ */');
				minifiedCode = '/* Minified by Minify Apex. Check us out on the world wide web. */' + minifiedCode;
				document.getElementById('minified').value = minifiedCode;
				sendEventToGA('Minify');
				showDisclaimer();
			}
			function prettify() {
				let minifiedCode = document.getElementById('minified').value;
				let prettyCode = minifiedCode.split('/* ¯\\_(ツ)_/¯ */').join('\n');
				prettyCode = '/* Prettified by Minify Apex. Check us out on the world wide web.*/ \n' + prettyCode;
				document.getElementById('pretty').value = prettyCode;
				sendEventToGA('Prettify');
			}
			function showDisclaimer() {
				let disclaimers = document.querySelectorAll('p.text-center.disclaimer');
				disclaimers.forEach(element => element.classList.remove('disclaimer'));
			}
			function sendEventToGA(event) {
				gtag('event', event);
			}
			function reportIssue() {
				sendEventToGA('Referral: Report Issue');
				window.open('https://github.com/rogeramitchell/minify-apex/issues');
			}
		</script>
		<!-- Bootstrap -->
		<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	</body>
</html>
