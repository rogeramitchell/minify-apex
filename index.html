<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-113826180-1"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			gtag('config', 'UA-113826180-1');
		</script>

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<!-- Bootstrap -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

		<!-- Page Specific Styles -->
		<style>
			html {
				position: relative;
				min-height: 100%;
			}
			body {
				margin-bottom: 60px;
			}
			main.container {
				padding: 60px 15px 0;
			}
			div.column-of-buttons {
				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
			}
			div.column-of-buttons > button {
				width: 100%;
				margin: 0.5rem 0;
			}
			footer.footer {
				position: absolute;
				bottom: 0;
				width: 100%;
				height: 60px;
				line-height: 60px;
				background-color: #f5f5f5;
			}
			div.footer > div.container {
				padding-right: 15px;
				padding-left: 15px;
			}
		</style>
	</head>
	<body>
		<header>
			<nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
				<div class="navbar-brand mr-auto">Minify Apex!</div>
				<button class="btn btn-outline-warning my-2" onclick="reportIssue()">Report Issue</button>
			</nav>
		</header>
		<main role="main" class="container">
			<h1 class="mt-5 text-center">Let's make Apex test coverage easier.</h1>
			<p class="text-center">Front end developers can minify their code into a single line. <br/> Apex developers need to write test coverage on a per-line basis.</p>
			<p class="lead text-center">So why not write coverage for just 1 line of code?</p>
			<div class="action-container">
				<div class="row">
					<div class="col-md">
						<label for="pretty">Pretty Apex</label>
						<textarea name="pretty" id="pretty" class="form-control" cols="30" rows="20" placeholder="Your many lines of code..."></textarea>
					</div>
					<div class="col-xs column-of-buttons">
						<button type="button" class="btn btn-primary" onclick="minify()">Minify →</button>
						<button type="button" class="btn btn-primary" onclick="prettify()">← Prettify</button>
					</div>
					<div class="col-md">
						<label for="minified">Minified Apex</label>
						<textarea name="minified" id="minified" class="form-control" cols="30" rows="20" placeholder="Your one line of code..."></textarea>
					</div>
				</div>
			</div>
		</main>
		<footer class="footer">
			<div class="container">
				<p class="text-muted text-center">© 2018 Dodge Labs • Check out <a href="https://www.dodgelabs.com">DodgeLabs.com</a> for developing apps without needing to minify your test coverage.</p>
			</div>
		</footer>
		<!-- JavaScript Functions -->
		<script type="text/javascript">
		function minify() {
			let prettyCode = document.getElementById('pretty').value;
			let minifiedCode = prettyCode.replace(/[\n\r]/g, '/* ¯\\_(ツ)_/¯ */');
			minifiedCode = '// Minified by minifyapex.github.io. Check us out on the world wide web. ' + minifiedCode;
			document.getElementById('minified').value = minifiedCode;
			sendEventToGA('Minify');
		}
		function prettify() {
			let minifiedCode = document.getElementById('minified').value;
			let prettyCode = minifiedCode.split('/* ¯\\_(ツ)_/¯ */').join('\n');
			prettyCode = '// Prettified by minifyapex.github.io. Check us out on the world wide web. \n' + prettyCode;
			document.getElementById('pretty').value = prettyCode;
			sendEventToGA('Prettify');
		}
		function sendEventToGA(event) {
			gtag('event', event, {
				'event_category': 'Minify/Prettify',
				'event_label': event,
				'value': Math.round(new Date() / 1000)
			});
		}
		function reportIssue() {
			window.open('https://github.com/rogeramitchell/minify-apex/issues');
		}
		</script>
		<!-- Bootstrap -->
		<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	</body>
</html>
